【監視体制運用マニュアル】

■ 概要
- 対象システム: 脳機能障害者社会復帰支援システム
- 監視対象: サーバーPC、アプリケーション、データベース
- 監視間隔: 1分間隔
- 責任者: [システム管理者名]

■ 監視項目

【システムリソース監視】
- CPU使用率: 80%以上でアラート
- メモリ使用率: 80%以上でアラート
- ディスク使用率: 90%以上でアラート
- システム稼働時間: 継続監視

【アプリケーション監視】
- Webサーバー応答時間: 5秒以上でアラート
- データベース接続状況: 接続エラーでアラート
- エラーログ監視: エラー発生時にアラート

【セキュリティ監視】
- 不正アクセス検知: 即座にアラート
- セキュリティログ監視: 異常検知時にアラート

■ 監視システム起動手順

【手動起動】
1. コマンドプロンプトを管理者権限で開く
2. プロジェクトディレクトリに移動
   cd C:\Users\user\OneDrive\Desktop\QRコード認証\version2
3. 監視スクリプトを実行
   node -e "const { SystemMonitor } = require('./utils/monitoring.js'); const monitor = new SystemMonitor(); monitor.startMonitoring();"

【自動起動（Windowsタスクスケジューラ）】
1. タスクスケジューラを開く
2. 「基本タスクの作成」を選択
3. タスク名: 「脳トレシステム監視」
4. トリガー: 「コンピューターの起動時」
5. 操作: 「プログラムの開始」
6. プログラム: node
7. 引数: -e "const { SystemMonitor } = require('./utils/monitoring.js'); const monitor = new SystemMonitor(); monitor.startMonitoring();"
8. 開始位置: C:\Users\user\OneDrive\Desktop\QRコード認証\version2

■ アラート対応手順

【CPU使用率アラート】
- 状況: CPU使用率が80%を超過
- 対応手順:
  1. タスクマネージャーでCPU使用率の高いプロセスを確認
  2. 不要なプロセスを終了
  3. アプリケーションの再起動を検討
  4. 対応完了後、ログに記録

【メモリ使用率アラート】
- 状況: メモリ使用率が80%を超過
- 対応手順:
  1. タスクマネージャーでメモリ使用量を確認
  2. メモリリークの可能性を調査
  3. アプリケーションの再起動
  4. 必要に応じてメモリ増設を検討
  5. 対応完了後、ログに記録

【ディスク使用率アラート】
- 状況: ディスク使用率が90%を超過
- 対応手順:
  1. ディスク使用量の詳細確認
  2. 不要ファイルの削除
  3. ログファイルの整理
  4. バックアップファイルの整理
  5. 対応完了後、ログに記録

【セキュリティアラート】
- 状況: 不正アクセスまたはセキュリティ異常を検知
- 対応手順:
  1. 即座にシステム管理者に連絡
  2. セキュリティログの詳細確認
  3. 必要に応じてシステム停止
  4. セキュリティパッチの適用
  5. 対応完了後、詳細レポートを作成

■ ログ管理

【ログファイルの場所】
- システム統計: ./logs/system_stats_YYYY-MM-DD.log
- アラート: ./logs/alerts_YYYY-MM-DD.log
- レポート: ./logs/reports/monitoring_report_YYYY-MM-DD.json

【ログ保持期間】
- システム統計: 30日間
- アラート: 90日間
- レポート: 1年間

【ログ整理手順】
1. 月次でログファイルの整理を実施
2. 古いログファイルをアーカイブ
3. ディスク容量の確認
4. 整理完了後、ログに記録

■ 日次レポート生成

【レポート生成手順】
1. コマンドプロンプトで以下を実行:
   node -e "
   const { SystemMonitor, MonitoringReport } = require('./utils/monitoring.js');
   const monitor = new SystemMonitor();
   const report = new MonitoringReport(monitor);
   const dailyReport = report.generateDailyReport();
   const savedPath = report.saveReport(dailyReport);
   console.log('レポート保存完了:', savedPath);
   "

【レポート内容】
- システム稼働状況
- リソース使用率の平均値
- アラート発生件数
- 推奨事項

【レポート確認】
- 毎日午前9時に前日のレポートを確認
- 異常があれば即座に対応
- 週次でレポートの傾向分析を実施

■ 緊急時対応

【システムダウン時】
1. システム管理者に即座に連絡
2. ダウンタイムの記録開始
3. 復旧作業の実施
4. 利用者への連絡
5. 復旧完了後、詳細レポートを作成

【データ損失時】
1. システム管理者に即座に連絡
2. バックアップからの復旧作業
3. データ整合性の確認
4. 損失原因の調査
5. 再発防止策の検討

【セキュリティインシデント時】
1. システム管理者に即座に連絡
2. 必要に応じてシステム停止
3. セキュリティログの保全
4. 外部専門家への相談
5. 関係者への報告

■ 定期メンテナンス

【週次メンテナンス】
- ログファイルの確認
- システムパフォーマンスの確認
- アラート設定の見直し
- 監視システムの動作確認

【月次メンテナンス】
- ログファイルの整理
- システム設定の見直し
- セキュリティ設定の確認
- 監視レポートの分析

【四半期メンテナンス】
- 監視システムの更新
- アラート閾値の調整
- 監視項目の見直し
- 運用マニュアルの更新

■ 連絡先

【緊急時連絡先】
- システム管理者: [電話番号] [メールアドレス]
- 責任者: [電話番号] [メールアドレス]
- 外部サポート: [連絡先]

【通常時連絡先】
- 運用担当者: [電話番号] [メールアドレス]
- 技術担当者: [電話番号] [メールアドレス]

■ 記録・承認
- 作成日: [日付]
- 作成者: [署名]
- 承認者: [署名]
- 次回更新予定: [日付] 